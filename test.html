<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>QRコード作成フォーム</title>

  <link rel="stylesheet" href="/assets/css/style.css">
</head>

<body>

  <div class="background">
    <div class="main-content">
      <h1>QRコード作成</h1>

      <div class="input-group">
        <!-- URLかを選択 -->
        <div class="typeSelect">
          <label>
            <input type="radio" name="typeSelect" value="url" checked>
            URL
          </label>
          <label>
            <input type="radio" name="typeSelect" value="custom">
            URL以外
          </label>
        </div>
        <!-- URL以外の詳細形式 -->
        <div class="form-group hidden" id="customTypeGroup">
          <label for="customTypeSelect">詳細形式</label>
          <select id="customTypeSelect">
            <option value="">--選択してください--</option>
            <option value="line">LINE（個人・グループ・公式）</option>
            <option value="wifi">Wi-Fi接続</option>
            <option value="paypay">PayPay送金</option>
          </select>
        </div>
        <!-- URL形式入力 -->
        <div class="input-group-url">
          <div class="input-button-container" id="urlInputGroup">
            <label for="urlInput">URLを入力</label>
            <input type="text" id="urlInput" value="https://tree-tools-brandingqr.pages.dev/" placeholder="URLを入力">
          </div>
        </div>
        <!-- LINE用入力 -->
        <div class="input-group-url hidden" id="lineInputGroup">
          <div class="form-group">
            <label for="lineType">LINEの種類</label>
            <select id="lineType">
              <option value="person">個人（LINE ID）</option>
              <option value="group">グループ（招待リンク）</option>
              <option value="official">公式アカウント</option>
            </select>
          </div>
          <div class="input-button-container">
            <label for="lineId">LINE ID</label>
            <input type="text" id="lineId" placeholder="例：name123">
          </div>
        </div>
        <!-- Wi-Fi用入力 -->
        <div class="input-group-url hidden" id="wifiInputGroup">
          <div class="input-button-container">
            <label>SSID：</label>
            <input type="text" id="wifiSsid">
          </div>
          <div class="input-button-container">
            <label>パスワード</label>
            <input type="text" id="wifiPass">
          </div>
          <div class="form-group">
            <label>セキュリティ</label>
            <select id="wifiSecurity">
              <option value="WPA">WPA/WPA2</option>
              <option value="WEP">WEP</option>
              <option value="nopass">なし</option>
            </select>
          </div>
        </div>
        <!-- PayPay用入力 -->
        <div class="input-group-url hidden" id="paypayInputGroup">
          <div class="input-button-container">
            <label for="paypayId">PayPay ID</label>
            <input type="text" id="paypayId" placeholder="例：name123">
          </div>
        </div>

      </div>
    </div>


  </div>
  </div>

  <script>

    // 要素を取得する関数
    function getEle(id) {
      return document.getElementById(id);
    }

    // URL入力の切り替え
    const customTypeGroup = getEle('customTypeGroup');
    const customTypeSelect = getEle('customTypeSelect');　//
    const urlInputGroup = getEle('urlInputGroup');
    const lineInputGroup = getEle('lineInputGroup');
    const wifiInputGroup = getEle('wifiInputGroup');
    const paypayInputGroup = getEle('paypayInputGroup');

    function hideGroups(...groups) {
      groups.forEach(g => g.classList.add('hidden'));
    }

    function showGroup(group) {
      group.classList.remove('hidden');
    }

    // ラジオボタン切り替え
    document.querySelectorAll('input[name="typeSelect"]').forEach(radio => {
      radio.addEventListener('change', () => {
        const isCustom = radio.value === 'custom';
        customTypeGroup.classList.toggle('hidden', !isCustom);
        urlInputGroup.classList.toggle('hidden', isCustom);

        if (!isCustom) {
          hideGroups(lineInputGroup, wifiInputGroup, paypayInputGroup);
        }
      });
    });

    // カスタムタイプ変更
    customTypeSelect.addEventListener('change', () => {
      hideGroups(lineInputGroup, wifiInputGroup, paypayInputGroup);
      const map = {
        line: lineInputGroup,
        wifi: wifiInputGroup,
        paypay: paypayInputGroup
      };
      if (map[customTypeSelect.value]) {
        showGroup(map[customTypeSelect.value]);
      }
    });

    // 生成処理
    function generate() {
      let result = '';
      const selectedType = document.querySelector('input[name="typeSelect"]:checked').value;
      if (selectedType === 'url') {
        result = getEle('urlInput').value.trim(); // 通常URL
      } else {
        const customType = customTypeSelect.value;
        if (customType === 'line') { // LINE パラメータlineId person, group, official
          const lineType = getEle('lineType').value;
          const id = getEle('lineId').value.trim();
          result = lineType === 'person' ? `https://line.me/ti/p/${id}` :
            lineType === 'group' ? id :
              lineType === 'official' ? `https://page.line.me/${id}` : '';
        } else if (customType === 'wifi') { // Wi-Fi パラメータ wifi
          const ssid = getEle('wifiSsid').value;
          const pass = getEle('wifiPass').value;
          const sec = getEle('wifiSecurity').value;
          result = `WIFI:S=${ssid};T=${sec};P=${pass};;`;
        } else if (customType === 'paypay') { // PayPay パラメータ paypay
          const paypayId = getEle('paypayId').value.trim();
          result = `https://paypay.me/${paypayId}`;
        }
      }
    }

  </script>

</body>

</html>